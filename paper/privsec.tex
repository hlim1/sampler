\section{Privacy and Security}
\label{sec:privsec}

As noted in our introduction, the most important program behaviors are
those exhibited by deployed software in the hands of users.  However,
any scheme for monitoring software post-deployment necessarily raises
privacy and security concerns.  The issues are complex and as much
social as technical.  However, our approach can only succeed if users
feel safe contributing to the shared data pool.  Thus, addressing
these concerns is both a moral and a practical imperative.

\begin{figure}
  \centering
  \newlength{\boxwidth}
  \setlength{\boxwidth}{\columnwidth}
  \addtolength{\boxwidth}{-\leftmargin}
  \addtolength{\boxwidth}{-\rightmargin}
  \fbox{\parbox{\boxwidth}{\small
      
      \addtolength{\parskip}{1ex}
      
      The Netscape Quality Feedback Agent is a feature that gathers
      predefined technical information about Communicator and sends it
      back to the Netscape software development team so they can
      improve future versions of Communicator.
      
      \dots
      
      No information is sent until you can examine exactly what is
      being sent.
  
      \dots
  
      Information gathered by this agent is limited to information
      about the state of Communicator when it has an error. Other
      sensitive information such as web sites visited, email messages,
      email addresses, passwords, and profiles will not be collected.
  
      All information Netscape collects via this agent will be used
      only for the purposes of fixing product defects and improving
      the quality of Netscape Communicator. This data is for internal
      diagnostic purposes only and will not be shared with third
      parties.
  
      For more information on Netscape's general privacy policy, go
      to: \url{http://home.netscape.com/legal_notices/privacy.html}
  
      Communicator activates the agent dialog box when a problem
      occurs, or when it has gathered information that Netscape needs
      to improve future versions of Communicator.
    
      \dots
  
      If you prefer to disable the agent, you may do so here:}}
  
  \caption{Privacy assurances as used in Netscape Quality Feedback Agent}
  \label{fig:netscape}
\end{figure}

The experiences of Netscape/Mozilla with crash feedback systems may be
illustrative.  We have met with members of the Netscape Talkback Team,
a group of quality assurance engineers who manage crash reports from
the automated feedback system.  Considerable effort has gone into
designing the client side of this system so that users are fully
informed.  The system is strictly opt-in on a per-failure basis, or
may be disabled entirely.  The user may optionally examine the
contents of the crash report, and no information is ever sent to
Netscape without explicit authorization.  Figure~\ref{fig:netscape}
shows the sort of information presented each time Netscape or Mozilla
has crash data to submit.

Not all users will read or understand these assurances.
\disregard{Furthermore, while one can visually scan a Mozilla crash
  report for incriminating strings, users cannot be expected to make
  informed privacy judgments about a predicate counters report that
  reveals that \texttt{indx} was found to be greater than
  \texttt{a\_count} 5280 times.}  Even so, there are some technical
measures we can take to protect the privacy of even non-technically
savvy users.  The very nature of the sampling process itself affords a
degree of anonymity.  We collect a small bit of information from many,
many users; any single run has little revelatory power. \disregard{,
  and the information which is revealed will generally be so randomly
  scattered as to make coherent reassembly of a compound value, such
  as a password string, infeasible.}

Some data, or some parts of execution, may be so sensitive that even
this diffuse information leakage is unacceptable.  Several type-based
analyses under the broad heading of secure information flow
\cite{1997:tapsoft:volpano,ZdZhNyMy2001} may be helpful here.  Such
systems statically identify parts of a program that manipulate
sensitive data; we can avoid inserting instrumentation that reveals
such values.  Of course, this will make it difficult to track bugs in
security-sensitive parts of an application, but that trade-off is
always present: one can only fix bugs about which that the customer is
willing to provide useful information.  \disregard{A greater challenge
  is assuring the correctness of these (or any) type-based approaches
  in the presence of memory safety bugs, but the \CCured project has
  shown that this too is possible.}

When using statistical models such as that of Section~\ref{sec:bc}, an
attractive mechanism for protecting user anonymity becomes available.
Many statistical analyses are characterized by a set of
\termdef{sufficient statistics}: a collection of values which
completely capture the internal state of the analysis.  For example,
if one wanted to compute the mean of a stream of numbers, then a
running total and a count would be sufficient statistics: the mean can
be computed from these without retaining the individual numbers in the
stream.  Similarly, once the logistic regression parameters have been
updated with a new trace, the trace itself may be discarded.  If the
analysis host is compromised, an attacker cannot recover the precise
details of any single past trace.

A statistical approach designed to cope with noise offers some
protection against malicious users who might try to poison the central
database with bogus data, or overwhelm it with data representing the
particular bugs they wish to see fixed.  Recent work on protecting
privacy and preventing abuse in collaborative filtering systems will
also be applicable here~\cite{Canny2002,EC00*150}.

