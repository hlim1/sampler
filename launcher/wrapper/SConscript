Import('env', 'testPythons')
env = env.Clone(
    commondir=env.subst('$commondir'),
    wrapperdir=env.subst('$wrapperdir'),
    )

Default(env.Template('Paths.py.in', varlist=['commondir', 'first_timedir', 'wrapperdir']))
pythons = [
    'AppConfig.py',
    'Launcher.py',
    'Main2.py',
    'Main.py',
    'Outcome.py',
    'Paths.py',
    'ReportsReader.py',
    'SampledLauncher.py',
    'ServerMessage.py',
    'UnsampledLauncher.py',
    'Uploader.py',
    'Upload.py',
    ]

compiled = env.PythonBytecodeOpt(pythons)
Default(compiled)

testPythons(env, pythons)
Alias('test', env.TestXML('wrapper.ui', schema=File('../gtk-builder.xsd')))

Alias('install', env.Install('$DESTDIR$wrapperdir', [compiled, 'wrapper.ui']))
