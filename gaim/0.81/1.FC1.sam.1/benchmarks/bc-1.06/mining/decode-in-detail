#!/usr/bin/perl -w

use strict;
use FileHandle;


die "Usage: $0 <site> <counter>\n" unless @ARGV == 2;
my ($site, $counter) = @ARGV;


foreach my $trial (1 .. 3000) {
    my $result = new FileHandle("../trials/$trial.result") or die;
    $result = <$result>;
    chomp $result;

    my $trace = new FileHandle("zcat ../trials/$trial.trace.gz |") or die;
    my $line;
    foreach my $skip (1 .. $site) {
	$line = <$trace>;
    }

    chomp $line;
    my @fields = split /\t/, $line;
    my @counters = @fields[6 .. 8];
    
    print "\t" if $result;
    print "$counters[$counter]\n";
}
